第 2 天必学：S3（Simple Storage Service，云端文件存储核心）
✅ 为什么必学：考题占比高，实操中你做 Web 开发（托管静态资源、用户上传文件）天天要用，后续 Lambda、CloudFront 都要和它对接，是 AWS 的 “门面服务”。

一、 通俗讲概念：S3 到底是啥？能干啥？
本质：对象存储服务，不是你电脑里的文件夹（文件存储），也不是硬盘（块存储），就是云端的 “无限容量文件柜”，专门存非结构化数据（图片、视频、JS/CSS、备份文件、日志等）。
核心容器：存储桶（Bucket）（必考！），相当于你在文件柜里搭的 “独立小抽屉”，所有文件（对象）都存在 Bucket 里，有 2 个关键特性必须记死：
Bucket 名全球唯一（比如你叫web-static-2025，别人就不能再用这个名字）
Bucket 创建时必须选区域（比如亚太 - 新加坡ap-southeast-1），数据存在对应区域，跨区域访问会额外计费（Free Tier 内控制好就不花钱）
通俗用途（贴合你的 Web 开发）：
托管 Vue/React 打包后的静态资源（dist 文件）
存储用户上传的头像、短视频
备份你的数据库文件、项目日志
直接搭建静态网站（不用服务器）

二、 必考核心考点（考试直接考，背会 + 理解）
核心特性（3 个高频考点）：
无限扩容：没有存储上限，小到 1KB 文本，大到 PB 级视频都能存
超高耐用性：官方 99.999999999%（11 个 9），数据会在多个可用区备份，几乎不会丢
默认私有：新建的 Bucket 和里面的对象，默认只有创建者能访问，对外访问需要手动配置权限（贴合 IAM 的最小权限原则）
2 个核心概念（考题必出）：
对象（Object）：就是你存的文件，包含「文件数据」+「元数据」（文件大小、类型、创建时间等）+「键（Key）」（文件在 Bucket 里的唯一路径，比如images/avatar-1.jpg）
存储层级（不用背全，记 2 个核心）：
标准存储：高频访问（比如用户头像、常用静态资源），Free Tier 免费 5GB，我们学习就用这个
冰川存储：归档冷数据（半年才看一次的备份），价格极低，读取慢，备考了解即可
实操相关考点（和你昨天的 IAM 联动）：
给 IAM 用户 / 角色授权 S3 权限（比如只读、读写），优先用官方预制策略（如AmazonS3ReadOnlyAccess、AmazonS3FullAccess）
静态资源对外访问：需将 Bucket 或对象配置为「公有读」（仅允许读取，禁止修改 / 删除）

三、 实操步骤（用 Free Tier，零成本练手，贴合你的 Web 开发）
你的目标：1. 创建 1 个 S3 Bucket 2. 给昨天的 IAM 用户上传文件（验证读写权限）3. 配置 Bucket 为「公有读」，托管 1 个静态 HTML 文件（模拟你的 Vue 项目部署）
步骤 1：创建 S3 Bucket（全球唯一，选区域）
登录 AWS 控制台，顶部搜索框搜「S3」，进入 S3 控制台
点击「创建存储桶」，按要求填写：
存储桶名称：填一个全球唯一的名字（比如your-name-web-static-2025，不能有大写、空格，可用小写、数字、连字符）
区域：选离你近的（比如ap-southeast-1 亚太 - 新加坡，ap-northeast-1 亚太 - 东京）
其余默认配置（不用改，默认私有），拉到最底部点击「创建存储桶」
创建成功后，在 S3 控制台列表里就能看到你的 Bucket，点击进入即可操作
步骤 2：给昨天的 IAM 用户（test-s3-read）升级权限，测试文件上传
先回到 IAM 控制台，找到昨天创建的「test-s3-read」用户
点击「权限」→ 「添加权限」→ 「附加直接策略」
搜索「AmazonS3FullAccess」（临时升级为全权限，方便测试上传，后续可改回只读），勾选后确认
用你熟悉的 Node.js 代码，给 S3 Bucket 上传 1 个本地静态 HTML 文件（比如index.html，内容随便写一句<h1>Hello AWS S3!</h1>）
const AWS = require('aws-sdk');
const fs = require('fs');

// 配置昨天的IAM用户密钥（不用改，和昨天一致）
AWS.config.update({
  accessKeyId: '你昨天复制的访问密钥ID',
  secretAccessKey: '你昨天复制的私有访问密钥',
  region: '你创建Bucket时选的区域（比如ap-southeast-1）'
});

const s3 = new AWS.S3();

// 上传本地index.html到S3 Bucket
const uploadParams = {
  Bucket: '你创建的Bucket名称（全球唯一那个）', // 必须填对
  Key: 'index.html', // 文件在S3里的键（路径），直接根目录存储
  Body: fs.createReadStream('./index.html'), // 本地index.html文件路径
    ContentType: 'text/html' // 关键配置：指定HTML类型	
};

// 执行上传
s3.upload(uploadParams, (err, data) => {
  if (err) console.log('上传错误：', err);
  else console.log('上传成功！文件访问地址：', data.Location);
});
运行代码：node 你的文件名.js，若打印「上传成功」+ 访问地址，说明权限生效，此时进入 S3 Bucket，就能看到index.html文件已存在

步骤 3：配置 Bucket 为「公有读」，实现静态文件对外访问（核心！贴合 Web 开发）
进入你的 S3 Bucket，点击「权限」标签页
找到「存储桶策略」，点击「编辑」
粘贴以下官方公有读策略（替换YourBucketName为你的 Bucket 名称，其余不变），这是 JSON 格式的策略（和 IAM 的 Policy 联动）：
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": "*", // * 表示所有用户（公有）
      "Action": "s3:GetObject", // GetObject 表示读取对象（下载/访问）
      "Resource": "arn:aws:s3:::YourBucketName/*" // 替换为你的Bucket名称，/* 表示Bucket内所有对象
    }
  ]
}
点击「保存更改」，此时 Bucket 内的所有对象都允许公有读访问
验证访问：复制步骤 2 中上传成功的data.Location地址，粘贴到浏览器地址栏，若能看到<h1>Hello AWS S3!</h1>，说明配置成功（你的静态文件已经可以全球访问了，相当于简易版静态网站部署）
步骤 4：还原最小权限（避坑！贴合备考考点）
回到 IAM 控制台，找到「test-s3-read」用户
点击「权限」，移除「AmazonS3FullAccess」策略，只保留「AmazonS3ReadOnlyAccess」
再次运行上传代码，会报错（无上传权限），验证最小权限原则生效

四、 真题小测（今天学完就能做，检验成果）
（助理级必考题型，和你的 Web 开发场景相关）题干：你是前端开发者，需要将 Vue 项目打包后的静态资源部署到 AWS，要求低成本、高可用、无需运维服务器，且防止他人盗链你的资源，以下哪个方案最合理？A. 创建 EC2 实例，部署 Nginx 托管静态资源，给 EC2 绑定弹性 IPB. 创建 S3 Bucket，配置为公有读托管静态资源，配合 CloudFront（CDN）加速并设置防盗链C. 使用 Lambda 函数，将静态资源嵌入代码中，通过 API Gateway 对外提供访问D. 创建 RDS 数据库，将静态资源以二进制形式存储，通过后端接口读取返回
✅ 正确答案：B✅ 解析：
A：需要运维 EC2 服务器，不符合 “无需运维”“低成本” 要求
B：S3 托管静态资源（零服务器、低成本、高可用），CloudFront 加速（全球访问更快），且支持防盗链配置，完全符合需求
C：Lambda 适合运行代码逻辑，不适合存储 / 托管静态资源，效率低且成本高
D：RDS 是关系型数据库，不适合存储静态资源，读取效率低且浪费数据库资源

今日作业（必须完成，巩固记忆）
默写 S3 的 2 个核心特性：Bucket 全球唯一、默认私有
确认实操 3 个步骤全部完成：创建 Bucket、上传静态 HTML、公有读访问成功
记住 1 个核心考点：Web 开发托管静态资源，优先选择 S3（配合 CloudFront），无需运维服务器
思考：为什么 S3 默认私有？（答案：贴合 AWS 安全最佳实践，防止未授权访问和数据泄露）